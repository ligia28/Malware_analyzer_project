from django.shortcuts import render
from django.http import HttpResponse
from django.core.files.storage import FileSystemStorage
from index_pool.models import *
from django.http import JsonResponse
# Create your views here.


def index(request):
    return render(request,'index_pool/index.html',{})

def upload(request):
    print("sunt intrat in functie")
    mw = Malware(mw_name="ceva1",mw_sha256="ceva2")
    mw.save()
    context={}
    if request.method=='POST':
        uploaded_file=request.FILES['document']
        fs=FileSystemStorage()
        name=fs.save(uploaded_file.name,uploaded_file)
        context['url']=fs.url(name)
        return JsonResponse({'error':False,'message':'Uploaded Successfully'})
    return render(request,'index_pool/upload.html',context)

def upload_malware(request):
    print("am intrat in upload malware")
    return render(request,'index',context);
